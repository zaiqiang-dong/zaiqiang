(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{449:function(s,t,a){s.exports=a.p+"assets/img/test-python.6fd0619b.svg"},509:function(s,t,a){"use strict";a.r(t);var n=a(29),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"编译全功能gdb"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#编译全功能gdb"}},[s._v("#")]),s._v(" 编译全功能GDB")]),s._v(" "),n("hr"),s._v(" "),n("table",[n("thead",[n("tr",[n("th",[s._v("软件版本")]),s._v(" "),n("th",[s._v("硬件版本")]),s._v(" "),n("th",[s._v("更新内容")])])]),s._v(" "),n("tbody",[n("tr",[n("td",[s._v("gdb-10.1")]),s._v(" "),n("td",[s._v("amd64")]),s._v(" "),n("td")])])]),s._v(" "),n("hr"),s._v(" "),n("h2",{attrs:{id:"_1-概述"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-概述"}},[s._v("#")]),s._v(" 1.概述")]),s._v(" "),n("p",[s._v("平时我们使用"),n("code",[s._v("apt install gdb")]),s._v("或者"),n("code",[s._v("yum install gdb")]),s._v("安装的gdb,可能功能不是最全的，比如我的使用场景中会存在如下两个功能需求：")]),s._v(" "),n("ol",[n("li",[s._v("host 平台是x86_64，但目标平台是aarch64")]),s._v(" "),n("li",[s._v("需要支持python，这样可以装插件或者做一些分析工具")])]),s._v(" "),n("p",[s._v("普通方式安装的"),n("code",[s._v("gdb")]),s._v("无法满足需求，这时需要我们自己来编译安装具备特定功能的"),n("code",[s._v("gdb")]),s._v(".")]),s._v(" "),n("h2",{attrs:{id:"_2-编译python"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-编译python"}},[s._v("#")]),s._v(" 2.编译python")]),s._v(" "),n("p",[s._v("这里为什么要编译python,原因是我们平时安装的python其实只是python的库和python解析器，但是我们在编译一些其他的软件时，是需要"),n("code",[s._v("libpythonxxx.so")]),s._v(",这种动态连接库的，所以我们需要编译python源码，当然你可以通过"),n("code",[s._v("apt install python-dev")]),s._v("来安装，我这里为了展示编译过程，选择从源来编译安装。")]),s._v(" "),n("h3",{attrs:{id:"_2-1-下载python"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-下载python"}},[s._v("#")]),s._v(" 2.1 下载python")]),s._v(" "),n("p",[s._v("因为我们gdb只支持python2（只是从一些资料了解到，但没有从官方的文档中确认），所以我这下载"),n("code",[s._v("python2.7.18")]),s._v("代码，下载如下")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://www.python.org/ftp/python/2.7.18/Python-2.7.18.tgz\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -xvf Python-2.7.18.tgz\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h3",{attrs:{id:"_2-2-编译python"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-编译python"}},[s._v("#")]),s._v(" 2.2 编译python")]),s._v(" "),n("p",[s._v("编译如下：")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 新建安装目录")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" python-install\n\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" Python-2.7.18\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 新建编译目录")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" build\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" build\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置,这半 --prefix 安装路径必须是绝对路径")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/configure --prefix"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/home/dongzaiq/Downloads/python-install --enable-shared\n\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编译安装")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br")])]),n("p",[s._v("以上过程，如果需要缺少一些，请根据错误提示自行安装")]),s._v(" "),n("h2",{attrs:{id:"_3-编译gdb"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-编译gdb"}},[s._v("#")]),s._v(" 3.编译GDB")]),s._v(" "),n("h3",{attrs:{id:"_3-1-下载gdb"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-下载gdb"}},[s._v("#")]),s._v(" 3.1 下载GDB")]),s._v(" "),n("p",[s._v("根据需要下载相应的"),n("code",[s._v("gdb")]),s._v("版本，我这里下载"),n("code",[s._v("8.3")]),s._v("版本")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" http://ftp.gnu.org/gnu/gdb/gdb-10.1.tar.xz\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"_3-2-编译带有全功能的gdb"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-编译带有全功能的gdb"}},[s._v("#")]),s._v(" 3.2 编译带有全功能的gdb")]),s._v(" "),n("p",[s._v("过程如下：")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -xvf ./gdb-10.1.tar.xz\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" gdb-10.1\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 新建编译目录")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" build\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" build\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里python-install就是我们在`2.2`编译出来python")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/configure --enable-python"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/python-install\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编译")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("h3",{attrs:{id:"_3-3-测试"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-测试"}},[s._v("#")]),s._v(" 3.3 测试")]),s._v(" "),n("p",[s._v("编译完成，"),n("code",[s._v("build")]),s._v("目录下的内容如下")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("~/Downloads/gdb-10.1/build\n❯ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\nbfd  config.log  config.status  etc  gdb  intl  libdecnumber  libiberty  Makefile  opcodes  readline  serdep.tmp  sim  zlib\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("编译好的"),n("code",[s._v("gdb")]),s._v("在"),n("code",[s._v("gdb/")]),s._v("\n测试过程如下：\n"),n("img",{attrs:{src:a(449),alt:"test python",title:"test python fucntion"}})]),s._v(" "),n("h3",{attrs:{id:"_3-4-编译aarch64目标平台gdb"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-编译aarch64目标平台gdb"}},[s._v("#")]),s._v(" 3.4 编译aarch64目标平台gdb")]),s._v(" "),n("p",[s._v("编译aarch64目标平台gdb，其实大体过程和上面一样，只是在"),n("code",[s._v("configure")]),s._v("时，加下如下选项")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("configure --host"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("x86_64-linux-gnu --target"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("aarch64-linux-gnu\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h2",{attrs:{id:"小结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[s._v("#")]),s._v(" 小结")]),s._v(" "),n("p",[s._v("在这里我们介绍编译带有"),n("code",[s._v("python2")]),s._v("功能和支持"),n("code",[s._v("aarch64")]),s._v("功能的"),n("code",[s._v("gdb")]),s._v(",如果你需要其实的gdb功能，也可以自己做配置，总之"),n("code",[s._v("gdb")]),s._v("是一个神器，用好它，可以帮助我们解析很多问题。")]),s._v(" "),n("hr"),s._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[s._v("Tip")]),s._v(" "),n("p",[s._v("欢迎评论、探讨,如果发现错误请指正。转载请注明出处！ "),n("a",{attrs:{href:"http://www.tsz.wiki",target:"_blank",rel:"noopener noreferrer"}},[s._v("探索者"),n("OutboundLink")],1)])]),s._v(" "),n("hr"),s._v(" "),n("Vssue",{attrs:{title:s.$title}})],1)}),[],!1,null,null,null);t.default=e.exports}}]);